# ç”µæ± åˆ†æè½¯ä»¶ - åŠŸèƒ½ä¼˜åŒ–å®Œæˆè¯´æ˜

## ğŸ“… æ›´æ–°æ—¥æœŸï¼š2025-11-18

## âœ… å·²å®Œæˆçš„7ä¸ªä¼˜åŒ–ï¼ˆæ–°å¢3ä¸ªï¼‰

### 1. âœ… è¯¦ç»†å‚æ•°é…ç½®UIï¼ˆå·²ç¡®è®¤å®ç°ï¼‰

**çŠ¶æ€ï¼š** å®Œæ•´å®ç°

**åŠŸèƒ½ï¼š**
- âœ… ç”µå‹é€šé“é…ç½®ï¼šé€šé“é€‰æ‹© + é‡ç¨‹é€‰æ‹©ï¼ˆ10mV ~ 100Vï¼‰
- âœ… æ¸©åº¦é€šé“é…ç½®ï¼šé€šé“é€‰æ‹© + é‡ç¨‹é€‰æ‹©ï¼ˆ100/500/2000Â°Cï¼‰+ çƒ­ç”µå¶ç±»å‹ï¼ˆK/J/E/T/N/R/S/Cï¼‰+ INT/EXTå‚è€ƒ
- âœ… å‚æ•°è¯´æ˜æç¤º
- âœ… é‡å¤é€šé“æ£€æµ‹

**æ–‡ä»¶ï¼š** `battery_analyzer/ui/dialogs/channel_config_dialog.py`

---

### 2. âœ… é…ç½®å®Œé€šé“åè‡ªåŠ¨é‡æ–°è¿æ¥è®¾å¤‡ï¼ˆå·²ä¼˜åŒ–ï¼‰

**é—®é¢˜ï¼š** ä¹‹å‰é…ç½®å®Œé€šé“åéœ€è¦æ‰‹åŠ¨å†æ¬¡ç‚¹å‡»"è¿æ¥è®¾å¤‡"æ‰èƒ½åº”ç”¨é…ç½®ï¼Œå³ä½¿è°ƒç”¨ `configure_channels()` ä¹Ÿä¼šå‡ºç°æ•°æ®é”™ä¹±

**æ ¹æœ¬åŸå› ï¼š** åªè°ƒç”¨ `configure_channels()` ä¸å¤Ÿï¼Œå¿…é¡»å®Œæ•´åœ°é‡æ–°è¿æ¥è®¾å¤‡æ‰èƒ½ç¡®ä¿é€šé“é…ç½®æ­£ç¡®ç”Ÿæ•ˆ

**è§£å†³æ–¹æ¡ˆï¼š**
- âœ… é…ç½®å¯¹è¯æ¡†ä¿å­˜åï¼Œå¦‚æœè®¾å¤‡å·²è¿æ¥ï¼Œå¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†è¯¢é—®æ˜¯å¦é‡æ–°è¿æ¥è®¾å¤‡
- âœ… ç”¨æˆ·é€‰æ‹©"æ˜¯"åï¼Œè°ƒç”¨ `_reconnect_device_with_new_config()` é‡æ–°è¿æ¥è®¾å¤‡
- âœ… é‡æ–°è¿æ¥æµç¨‹ï¼š
  1. ä¿å­˜å½“å‰è¿æ¥å‚æ•°ï¼ˆIP/ç«¯å£/COMå£ï¼‰
  2. æ–­å¼€å½“å‰è¿æ¥
  3. ç­‰å¾…0.5ç§’è®©è®¾å¤‡å®Œå…¨æ–­å¼€
  4. ä½¿ç”¨ä¿å­˜çš„å‚æ•°é‡æ–°è¿æ¥
  5. è‡ªåŠ¨åº”ç”¨æ–°çš„é€šé“é…ç½®
- âœ… æ˜¾ç¤ºåŠ è½½è¿›åº¦å¯¹è¯æ¡†ï¼Œæç¤º"æ­£åœ¨é‡æ–°è¿æ¥è®¾å¤‡ä»¥åº”ç”¨æ–°é…ç½®..."
- âœ… é…ç½®æˆåŠŸåæ˜¾ç¤ºè¯¦ç»†çš„é…ç½®ä¿¡æ¯

**æ–°å¢æ–¹æ³•ï¼š**
```python
def _reconnect_device_with_new_config(self) -> None:
    """é‡æ–°è¿æ¥è®¾å¤‡ä»¥åº”ç”¨æ–°é…ç½®"""
    # 1. ä¿å­˜å½“å‰è¿æ¥å‚æ•°
    # 2. æ–­å¼€å½“å‰è¿æ¥
    # 3. ç­‰å¾…è®¾å¤‡å®Œå…¨æ–­å¼€
    # 4. é‡æ–°è¿æ¥è®¾å¤‡
    # 5. è‡ªåŠ¨åº”ç”¨æ–°é…ç½®
```

**ç”¨æˆ·ä½“éªŒï¼š**
```
é…ç½®é€šé“ â†’ ä¿å­˜ â†’ å¼¹å‡ºç¡®è®¤å¯¹è¯æ¡† â†’ ç‚¹å‡»"æ˜¯" â†’ è‡ªåŠ¨é‡æ–°è¿æ¥è®¾å¤‡ â†’ å®Œæˆ
```

**æ–‡ä»¶ï¼š** `battery_analyzer/ui/main_window.py` (è¡Œ 1199-1250)

---

### 3. âœ… è¿æ¥è®¾å¤‡æ—¶æ˜¾ç¤ºåŠ è½½ç­‰å¾…æç¤º

**é—®é¢˜ï¼š** ç‚¹å‡»è¿æ¥è®¾å¤‡åï¼Œç•Œé¢å¡é¡¿ï¼Œæ²¡æœ‰ä»»ä½•æç¤º

**è§£å†³æ–¹æ¡ˆï¼š**
- âœ… ç‚¹å‡»è¿æ¥åç«‹å³æ˜¾ç¤º `QProgressDialog` åŠ è½½å¯¹è¯æ¡†
- âœ… æ˜¾ç¤ºè¿æ¥è¿›åº¦æ–‡æœ¬ï¼š
  - "æ­£åœ¨é€šè¿‡TCPè¿æ¥è®¾å¤‡ 192.168.1.100:8802..."
  - "æ­£åœ¨é€šè¿‡USBè¿æ¥è®¾å¤‡ COM3..."
  - "âœ“ è®¾å¤‡å·²è¿æ¥ï¼Œæ­£åœ¨é…ç½®é€šé“..."
- âœ… è¿æ¥æˆåŠŸ/å¤±è´¥åè‡ªåŠ¨å…³é—­åŠ è½½å¯¹è¯æ¡†
- âœ… å¼‚å¸¸æƒ…å†µä¹Ÿä¼šæ­£ç¡®å…³é—­å¯¹è¯æ¡†

**å®ç°ç»†èŠ‚ï¼š**
```python
# æ˜¾ç¤ºåŠ è½½å¯¹è¯æ¡†
progress = QProgressDialog(progress_text, None, 0, 0, self)
progress.setWindowTitle("è¿æ¥ä¸­")
progress.setWindowModality(Qt.WindowModality.WindowModal)
progress.show()
QApplication.processEvents()

# è¿æ¥è®¾å¤‡...
# é…ç½®é€šé“...

# å…³é—­åŠ è½½å¯¹è¯æ¡†
progress.close()
```

**ç”¨æˆ·ä½“éªŒï¼š**
```
ç‚¹å‡»è¿æ¥ â†’ ç«‹å³æ˜¾ç¤ºåŠ è½½å¯¹è¯æ¡† â†’ è¿æ¥ä¸­... â†’ é…ç½®é€šé“... â†’ å…³é—­å¯¹è¯æ¡† â†’ æ˜¾ç¤ºç»“æœ
```

**æ–‡ä»¶ï¼š** `battery_analyzer/ui/main_window.py` (è¡Œ 908-1065)

---

### 4. âœ… Yè½´èŒƒå›´è·Ÿéšé…ç½®çš„é‡ç¨‹åŠ¨æ€è°ƒæ•´

**é—®é¢˜ï¼š** Yè½´èŒƒå›´å›ºå®šï¼ˆç”µå‹0-10Vï¼Œæ¸©åº¦0-260Â°Cï¼‰ï¼Œä¸éšé…ç½®çš„é‡ç¨‹å˜åŒ–

**è§£å†³æ–¹æ¡ˆï¼š**
- âœ… æ–°å¢ `_update_plot_ranges()` æ–¹æ³•ï¼Œæ ¹æ®é…ç½®çš„é‡ç¨‹åŠ¨æ€è°ƒæ•´Yè½´èŒƒå›´
- âœ… ç”µå‹Yè½´èŒƒå›´ = max(ä¸‰å…ƒç”µæ± ç”µå‹é‡ç¨‹, åˆ€ç‰‡ç”µæ± ç”µå‹é‡ç¨‹) Ã— 1.1
- âœ… æ¸©åº¦Yè½´èŒƒå›´ = max(ä¸‰å…ƒç”µæ± æ¸©åº¦é‡ç¨‹, åˆ€ç‰‡ç”µæ± æ¸©åº¦é‡ç¨‹) Ã— 1.1
- âœ… æ›´æ–°Yè½´æ ‡ç­¾ï¼Œæ˜¾ç¤ºå½“å‰é‡ç¨‹ä¿¡æ¯
- âœ… åœ¨ä»¥ä¸‹æ—¶æœºè‡ªåŠ¨æ›´æ–°Yè½´èŒƒå›´ï¼š
  - ç¨‹åºå¯åŠ¨æ—¶ï¼ˆ`__init__`ï¼‰
  - ä¿å­˜é€šé“é…ç½®åï¼ˆ`_show_channel_config_dialog`ï¼‰
  - åº”ç”¨é…ç½®åˆ°è®¾å¤‡åï¼ˆ`_apply_channel_config_to_device`ï¼‰

**å®ç°ç»†èŠ‚ï¼š**
```python
def _update_plot_ranges(self) -> None:
    """æ ¹æ®é…ç½®çš„é‡ç¨‹æ›´æ–°Yè½´èŒƒå›´"""
    # è·å–ç”µå‹é‡ç¨‹ï¼ˆä¸¤ä¸ªç”µæ± å–æœ€å¤§å€¼ï¼‰
    voltage_range = max(
        self.channel_config['ternary_voltage']['range'],
        self.channel_config['blade_voltage']['range']
    )
    
    # è·å–æ¸©åº¦é‡ç¨‹ï¼ˆä¸¤ä¸ªç”µæ± å–æœ€å¤§å€¼ï¼‰
    temp_range = max(
        self.channel_config['ternary_temp']['range'],
        self.channel_config['blade_temp']['range']
    )
    
    # æ›´æ–°Yè½´èŒƒå›´ï¼ˆå·¦Yè½´=ç”µå‹ï¼Œå³Yè½´=æ¸©åº¦ï¼‰
    self.waveforms.left_plot.setYRange(0, voltage_range * 1.1, padding=0)
    self.waveforms.left_plot.viewbox_temp.setYRange(0, temp_range * 1.1)
    self.waveforms.right_plot.setYRange(0, voltage_range * 1.1, padding=0)
    self.waveforms.right_plot.viewbox_temp.setYRange(0, temp_range * 1.1)
    
    # æ›´æ–°Yè½´æ ‡ç­¾
    self.waveforms.left_plot.setLabel('left', f'ç”µå‹ (V, é‡ç¨‹: {voltage_range}V)', ...)
    self.waveforms.left_plot.setLabel('right', f'æ¸©åº¦ (Â°C, é‡ç¨‹: {temp_range}Â°C)', ...)
```

**ç¤ºä¾‹ï¼š**
- é…ç½®ç”µå‹é‡ç¨‹ä¸º 20Vï¼Œæ¸©åº¦é‡ç¨‹ä¸º 2000Â°C
- Yè½´è‡ªåŠ¨è°ƒæ•´ä¸ºï¼šç”µå‹ 0-22Vï¼Œæ¸©åº¦ 0-2200Â°C
- Yè½´æ ‡ç­¾æ˜¾ç¤ºï¼š"ç”µå‹ (V, é‡ç¨‹: 20V)"ã€"æ¸©åº¦ (Â°C, é‡ç¨‹: 2000Â°C)"

**æ–‡ä»¶ï¼š** `battery_analyzer/ui/main_window.py` (è¡Œ 1254-1284)

---

### 5. âœ… BURNOUTå¼‚å¸¸æ•°æ®æ£€æµ‹ï¼ˆæ–°å¢ï¼‰

**é—®é¢˜ï¼š** å½“æ¸©åº¦ä¼ æ„Ÿå™¨æœªè¿æ¥æˆ–å¼‚å¸¸æ—¶ï¼Œè®¾å¤‡æ˜¾ç¤ºBURNOUTï¼Œè¯»å–çš„æ¸©åº¦å€¼å¼‚å¸¸å¤§ï¼ˆå¦‚300+ã€1600+ï¼‰ï¼Œè¿œè¶…é‡ç¨‹

**è§£å†³æ–¹æ¡ˆï¼š**
- âœ… åœ¨æ•°æ®é‡‡é›†æ—¶æ£€æµ‹å¼‚å¸¸å€¼
- âœ… åˆ¤æ–­æ ‡å‡†ï¼šå¦‚æœè¯»å–å€¼è¶…å‡ºé…ç½®é‡ç¨‹çš„1.5å€ï¼Œåˆ¤å®šä¸ºå¼‚å¸¸
- âœ… å¼‚å¸¸å¤„ç†ï¼šå°†å¼‚å¸¸å€¼è®¾ç½®ä¸º0ï¼Œå¹¶åœ¨æ§åˆ¶å°è¾“å‡ºè­¦å‘Šä¿¡æ¯
- âœ… åŒæ—¶æ£€æµ‹ç”µå‹å’Œæ¸©åº¦ä¸¤ç§ç±»å‹çš„å¼‚å¸¸

**å®ç°ç»†èŠ‚ï¼š**
```python
# æ£€æµ‹BURNOUTå¼‚å¸¸ï¼ˆæ¸©åº¦è¶…å‡ºé‡ç¨‹1.5å€è§†ä¸ºå¼‚å¸¸ï¼‰
ternary_temp_range = self.channel_config['ternary_temp']['range']

if abs(t_ternary) > ternary_temp_range * 1.5:
    print(f"âš ï¸ ä¸‰å…ƒç”µæ± æ¸©åº¦å¼‚å¸¸ (BURNOUT): {t_ternary:.2f}Â°C (é‡ç¨‹: {ternary_temp_range}Â°C)")
    t_ternary = 0.0
```

**ç¤ºä¾‹ï¼š**
- é…ç½®æ¸©åº¦é‡ç¨‹ä¸º 100Â°C
- è¯»å–å€¼ä¸º 300Â°Cï¼ˆè¶…å‡ºé‡ç¨‹3å€ï¼‰
- åˆ¤å®šä¸ºBURNOUTå¼‚å¸¸ï¼Œè®¾ç½®ä¸º 0Â°C
- æ§åˆ¶å°è¾“å‡ºï¼š`âš ï¸ ä¸‰å…ƒç”µæ± æ¸©åº¦å¼‚å¸¸ (BURNOUT): 300.00Â°C (é‡ç¨‹: 100Â°C)`

**æ–‡ä»¶ï¼š** `battery_analyzer/ui/main_window.py` (è¡Œ 732-757)

---

### 6. âœ… è‡ªåŠ¨ä¿å­˜å’ŒåŠ è½½é€šé“é…ç½®ï¼ˆæ–°å¢ï¼‰

**é—®é¢˜ï¼š** æ¯æ¬¡æ‰“å¼€è½¯ä»¶éƒ½éœ€è¦é‡æ–°é…ç½®é€šé“ï¼Œéå¸¸ç¹ç

**è§£å†³æ–¹æ¡ˆï¼š**
- âœ… æ¯æ¬¡ä¿å­˜é€šé“é…ç½®æ—¶ï¼Œè‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶
- âœ… ç¨‹åºå¯åŠ¨æ—¶ï¼Œè‡ªåŠ¨åŠ è½½ä¸Šæ¬¡ä¿å­˜çš„é€šé“é…ç½®
- âœ… é…ç½®æ–‡ä»¶ä¿å­˜åœ¨ç”¨æˆ·ç›®å½•ï¼š`~/.battery_analyzer/channel_config.json`
- âœ… é…ç½®æ–‡ä»¶æ ¼å¼ä¸ºJSONï¼Œæ˜“äºæŸ¥çœ‹å’Œç¼–è¾‘
- âœ… åŠ è½½é…ç½®æ—¶éªŒè¯å®Œæ•´æ€§ï¼Œå¦‚æœé…ç½®ä¸å®Œæ•´åˆ™ä½¿ç”¨é»˜è®¤é…ç½®

**æ–°å¢æ–¹æ³•ï¼š**
```python
def _save_channel_config_to_file(self) -> None:
    """ä¿å­˜é€šé“é…ç½®åˆ°æœ¬åœ°æ–‡ä»¶"""
    # ä¿å­˜åˆ° ~/.battery_analyzer/channel_config.json

def _load_channel_config_from_file(self) -> None:
    """ä»æœ¬åœ°æ–‡ä»¶åŠ è½½é€šé“é…ç½®"""
    # ä» ~/.battery_analyzer/channel_config.json åŠ è½½
```

**é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š**
```json
{
    "ternary_voltage": {
        "channel": "CH2_1",
        "type": "VOLTAGE",
        "range": 20.0
    },
    "ternary_temp": {
        "channel": "CH2_3",
        "type": "TEMPERATURE",
        "range": 2000,
        "thermocouple": "K",
        "int_ext": "INT"
    },
    ...
}
```

**ç”¨æˆ·ä½“éªŒï¼š**
```
ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼šé…ç½®é€šé“ â†’ ä¿å­˜ â†’ è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶
ç¬¬äºŒæ¬¡ä½¿ç”¨ï¼šæ‰“å¼€è½¯ä»¶ â†’ è‡ªåŠ¨åŠ è½½ä¸Šæ¬¡çš„é…ç½® â†’ æ— éœ€é‡æ–°é…ç½®
```

**æ–‡ä»¶ï¼š** `battery_analyzer/ui/main_window.py` (è¡Œ 1286-1333)

---

### 7. âœ… é…ç½®ä¿å­˜æ—¶æœºä¼˜åŒ–ï¼ˆæ–°å¢ï¼‰

**ä¼˜åŒ–ï¼š** åœ¨é€šé“é…ç½®å¯¹è¯æ¡†ä¿å­˜åï¼Œè‡ªåŠ¨è°ƒç”¨ `_save_channel_config_to_file()` ä¿å­˜é…ç½®

**è§¦å‘æ—¶æœºï¼š**
- ç”¨æˆ·åœ¨é€šé“é…ç½®å¯¹è¯æ¡†ç‚¹å‡»"ä¿å­˜é…ç½®"å
- è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶
- ä¸‹æ¬¡å¯åŠ¨è½¯ä»¶æ—¶è‡ªåŠ¨åŠ è½½

**æ–‡ä»¶ï¼š** `battery_analyzer/ui/main_window.py` (è¡Œ 1121)

---

## ğŸ“Š å®Œæ•´çš„å·¥ä½œæµç¨‹

### åœºæ™¯1ï¼šé¦–æ¬¡è¿æ¥è®¾å¤‡

```
1. ç‚¹å‡»"è¿æ¥è®¾å¤‡"
   â†“
2. ç«‹å³æ˜¾ç¤ºåŠ è½½å¯¹è¯æ¡†ï¼š"æ­£åœ¨é€šè¿‡TCPè¿æ¥è®¾å¤‡..."
   â†“
3. è¿æ¥æˆåŠŸï¼Œæ›´æ–°æç¤ºï¼š"âœ“ è®¾å¤‡å·²è¿æ¥ï¼Œæ­£åœ¨é…ç½®é€šé“..."
   â†“
4. è‡ªåŠ¨é…ç½®é€šé“ï¼ˆä½¿ç”¨å½“å‰é…ç½®çš„å‚æ•°ï¼‰
   â†“
5. å…³é—­åŠ è½½å¯¹è¯æ¡†
   â†“
6. æ˜¾ç¤ºè¿æ¥æˆåŠŸå¯¹è¯æ¡†ï¼Œåˆ—å‡ºå·²é…ç½®çš„é€šé“å’Œå‚æ•°
   â†“
7. Yè½´èŒƒå›´å·²æ ¹æ®é…ç½®çš„é‡ç¨‹è‡ªåŠ¨è°ƒæ•´
   â†“
8. å¯ä»¥å¼€å§‹æµ‹è¯•
```

### åœºæ™¯2ï¼šä¿®æ”¹é€šé“é…ç½®ï¼ˆè®¾å¤‡å·²è¿æ¥ï¼‰

```
1. ç‚¹å‡»"é€šé“é…ç½®"
   â†“
2. æ‰“å¼€é…ç½®å¯¹è¯æ¡†ï¼Œä¿®æ”¹å‚æ•°ï¼ˆå¦‚ï¼šç”µå‹é‡ç¨‹æ”¹ä¸º20Vï¼Œæ¸©åº¦é‡ç¨‹æ”¹ä¸º2000Â°Cï¼‰
   â†“
3. ç‚¹å‡»"ä¿å­˜é…ç½®"
   â†“
4. è‡ªåŠ¨ä¿å­˜é…ç½®åˆ°æœ¬åœ°æ–‡ä»¶ âœ¨
   â†“
5. Yè½´èŒƒå›´ç«‹å³æ›´æ–°ï¼ˆç”µå‹0-22Vï¼Œæ¸©åº¦0-2200Â°Cï¼‰âœ¨
   â†“
6. å¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†ï¼š"æ˜¯å¦é‡æ–°è¿æ¥è®¾å¤‡ä»¥åº”ç”¨æ–°é…ç½®ï¼Ÿ" âœ¨
   â†“
7. ç‚¹å‡»"æ˜¯"
   â†“
8. æ˜¾ç¤ºåŠ è½½å¯¹è¯æ¡†ï¼š"æ­£åœ¨é‡æ–°è¿æ¥è®¾å¤‡ä»¥åº”ç”¨æ–°é…ç½®..." âœ¨
   â†“
9. è‡ªåŠ¨æ–­å¼€è¿æ¥ â†’ ç­‰å¾…0.5ç§’ â†’ é‡æ–°è¿æ¥ â†’ åº”ç”¨æ–°é…ç½® âœ¨
   â†“
10. é…ç½®æˆåŠŸï¼Œå…³é—­åŠ è½½å¯¹è¯æ¡†
   â†“
11. æ˜¾ç¤ºè¿æ¥æˆåŠŸå¯¹è¯æ¡†ï¼Œåˆ—å‡ºæ–°çš„é…ç½®å‚æ•°
   â†“
12. æ•°æ®ä¸ä¼šé”™ä¹±ï¼Œç›´æ¥å¼€å§‹æµ‹è¯• âœ¨
```

### åœºæ™¯3ï¼šä¿®æ”¹é€šé“é…ç½®ï¼ˆè®¾å¤‡æœªè¿æ¥ï¼‰

```
1. ç‚¹å‡»"é€šé“é…ç½®"
   â†“
2. æ‰“å¼€é…ç½®å¯¹è¯æ¡†ï¼Œä¿®æ”¹å‚æ•°
   â†“
3. ç‚¹å‡»"ä¿å­˜é…ç½®"
   â†“
4. è‡ªåŠ¨ä¿å­˜é…ç½®åˆ°æœ¬åœ°æ–‡ä»¶ âœ¨
   â†“
5. Yè½´èŒƒå›´ç«‹å³æ›´æ–° âœ¨
   â†“
6. æ˜¾ç¤ºæç¤ºï¼š"é€šé“é…ç½®å·²æ›´æ–°ï¼Œä¸‹æ¬¡è¿æ¥è®¾å¤‡æ—¶å°†è‡ªåŠ¨åº”ç”¨æ­¤é…ç½®"
   â†“
7. ä¸‹æ¬¡è¿æ¥è®¾å¤‡æ—¶ï¼Œè‡ªåŠ¨ä½¿ç”¨æ–°é…ç½®
```

### åœºæ™¯4ï¼šç¬¬äºŒæ¬¡å¯åŠ¨è½¯ä»¶ï¼ˆæ–°å¢ï¼‰

```
1. æ‰“å¼€è½¯ä»¶
   â†“
2. è‡ªåŠ¨ä»æœ¬åœ°æ–‡ä»¶åŠ è½½ä¸Šæ¬¡ä¿å­˜çš„é€šé“é…ç½® âœ¨
   â†“
3. çŠ¶æ€æ æ˜¾ç¤ºï¼š"âœ“ å·²åŠ è½½ä¸Šæ¬¡ä¿å­˜çš„é€šé“é…ç½®" âœ¨
   â†“
4. Yè½´èŒƒå›´æ ¹æ®åŠ è½½çš„é…ç½®è‡ªåŠ¨è°ƒæ•´ âœ¨
   â†“
5. æ— éœ€é‡æ–°é…ç½®ï¼Œç›´æ¥è¿æ¥è®¾å¤‡å³å¯ä½¿ç”¨ âœ¨
```

### åœºæ™¯5ï¼šæ¸©åº¦ä¼ æ„Ÿå™¨æœªè¿æ¥ï¼ˆBURNOUTï¼‰

```
1. è¿æ¥è®¾å¤‡ï¼Œå¼€å§‹é‡‡é›†æ•°æ®
   â†“
2. æ¸©åº¦ä¼ æ„Ÿå™¨æœªè¿æ¥ï¼Œè®¾å¤‡æ˜¾ç¤ºBURNOUT
   â†“
3. è¯»å–æ¸©åº¦å€¼ä¸º 1600Â°Cï¼ˆè¿œè¶…é‡ç¨‹100Â°Cï¼‰
   â†“
4. è½¯ä»¶æ£€æµ‹åˆ°å¼‚å¸¸ï¼ˆè¶…å‡ºé‡ç¨‹1.5å€ï¼‰ âœ¨
   â†“
5. æ§åˆ¶å°è¾“å‡ºè­¦å‘Šï¼š"âš ï¸ ä¸‰å…ƒç”µæ± æ¸©åº¦å¼‚å¸¸ (BURNOUT): 1600.00Â°C (é‡ç¨‹: 100Â°C)" âœ¨
   â†“
6. å°†å¼‚å¸¸å€¼è®¾ç½®ä¸º 0Â°C âœ¨
   â†“
7. æ³¢å½¢æ˜¾ç¤ºä¸º 0Â°Cï¼Œä¸ä¼šæ˜¾ç¤ºå¼‚å¸¸çš„å¤§æ•°å€¼ âœ¨
   â†“
8. ç”¨æˆ·å¯ä»¥æ ¹æ®æ§åˆ¶å°è­¦å‘Šåˆ¤æ–­ä¼ æ„Ÿå™¨æœªè¿æ¥
```

---

## ğŸ”§ æŠ€æœ¯å®ç°è¦ç‚¹

### 1. åŠ è½½å¯¹è¯æ¡†çš„æ­£ç¡®ä½¿ç”¨

```python
# åˆ›å»ºåŠ è½½å¯¹è¯æ¡†
progress = QProgressDialog(text, None, 0, 0, self)
progress.setWindowTitle("æ ‡é¢˜")
progress.setWindowModality(Qt.WindowModality.WindowModal)  # æ¨¡æ€å¯¹è¯æ¡†
progress.setMinimumDuration(0)  # ç«‹å³æ˜¾ç¤º
progress.setValue(0)
progress.show()
QApplication.processEvents()  # ç«‹å³åˆ·æ–°UI

# æ›´æ–°æç¤ºæ–‡æœ¬
progress.setLabelText("æ–°çš„æç¤ºæ–‡æœ¬...")
QApplication.processEvents()

# å…³é—­å¯¹è¯æ¡†
progress.close()
```

### 2. Yè½´èŒƒå›´çš„åŠ¨æ€è°ƒæ•´

```python
# å·¦Yè½´ï¼ˆç”µå‹ï¼‰- ä½¿ç”¨ setYRange
plot.setYRange(0, voltage_range * 1.1, padding=0)

# å³Yè½´ï¼ˆæ¸©åº¦ï¼‰- ä½¿ç”¨ viewbox_temp.setYRange
plot.viewbox_temp.setYRange(0, temp_range * 1.1)
```

### 3. é…ç½®åº”ç”¨çš„æ—¶æœº

- **è¿æ¥è®¾å¤‡æ—¶ï¼š** è‡ªåŠ¨åº”ç”¨å½“å‰é…ç½®
- **ä¿®æ”¹é…ç½®åï¼ˆè®¾å¤‡å·²è¿æ¥ï¼‰ï¼š** è¯¢é—®ç”¨æˆ·æ˜¯å¦ç«‹å³åº”ç”¨
- **ä¿®æ”¹é…ç½®åï¼ˆè®¾å¤‡æœªè¿æ¥ï¼‰ï¼š** ä¸‹æ¬¡è¿æ¥æ—¶è‡ªåŠ¨åº”ç”¨

---

## ğŸ¯ ç”¨æˆ·ä½“éªŒæ”¹è¿›æ€»ç»“

| ä¼˜åŒ–é¡¹ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å |
|--------|--------|--------|
| **å‚æ•°é…ç½®** | åªèƒ½é€‰æ‹©é€šé“ | å¯é…ç½®é‡ç¨‹ã€çƒ­ç”µå¶ç±»å‹ã€INT/EXT |
| **é…ç½®åº”ç”¨** | éœ€è¦æ‰‹åŠ¨é‡æ–°è¿æ¥ | è‡ªåŠ¨é‡æ–°è¿æ¥è®¾å¤‡ï¼Œç¡®ä¿é…ç½®ç”Ÿæ•ˆ âœ¨ |
| **è¿æ¥æç¤º** | æ— æç¤ºï¼Œç•Œé¢å¡é¡¿ | æ˜¾ç¤ºåŠ è½½å¯¹è¯æ¡†ï¼Œå®æ—¶æç¤ºè¿›åº¦ |
| **Yè½´èŒƒå›´** | å›ºå®šèŒƒå›´ï¼ˆ0-10V, 0-260Â°Cï¼‰ | æ ¹æ®é…ç½®çš„é‡ç¨‹åŠ¨æ€è°ƒæ•´ |
| **å¼‚å¸¸æ•°æ®** | æ˜¾ç¤ºå¼‚å¸¸å¤§æ•°å€¼ï¼ˆ1600+ï¼‰ | è‡ªåŠ¨æ£€æµ‹BURNOUTï¼Œè®¾ç½®ä¸º0 âœ¨ |
| **é…ç½®æŒä¹…åŒ–** | æ¯æ¬¡å¯åŠ¨éƒ½è¦é‡æ–°é…ç½® | è‡ªåŠ¨ä¿å­˜å’ŒåŠ è½½é…ç½® âœ¨ |
| **æ•°æ®é”™ä¹±** | é…ç½®åæ•°æ®é”™ä½ | é‡æ–°è¿æ¥è®¾å¤‡ï¼Œæ•°æ®æ­£ç¡® âœ¨ |

---

## ğŸ“ æµ‹è¯•å»ºè®®

### æµ‹è¯•1ï¼šè¿æ¥è®¾å¤‡æ—¶çš„åŠ è½½æç¤º
1. ç‚¹å‡»"è¿æ¥è®¾å¤‡"
2. è§‚å¯Ÿæ˜¯å¦ç«‹å³æ˜¾ç¤ºåŠ è½½å¯¹è¯æ¡†
3. è§‚å¯Ÿæç¤ºæ–‡æœ¬æ˜¯å¦æ­£ç¡®æ›´æ–°
4. è¿æ¥æˆåŠŸåå¯¹è¯æ¡†æ˜¯å¦è‡ªåŠ¨å…³é—­

### æµ‹è¯•2ï¼šé…ç½®åº”ç”¨ï¼ˆè®¾å¤‡å·²è¿æ¥ï¼‰
1. è¿æ¥è®¾å¤‡
2. ç‚¹å‡»"é€šé“é…ç½®"ï¼Œä¿®æ”¹å‚æ•°ï¼ˆå¦‚ï¼šç”µå‹é‡ç¨‹æ”¹ä¸º20Vï¼‰
3. ä¿å­˜é…ç½®
4. è§‚å¯ŸYè½´èŒƒå›´æ˜¯å¦ç«‹å³æ›´æ–°
5. è§‚å¯Ÿæ˜¯å¦å¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†
6. ç‚¹å‡»"æ˜¯"ï¼Œè§‚å¯Ÿæ˜¯å¦æ˜¾ç¤ºåŠ è½½å¯¹è¯æ¡†
7. è§‚å¯Ÿé…ç½®æ˜¯å¦æˆåŠŸåº”ç”¨

### æµ‹è¯•3ï¼šYè½´èŒƒå›´åŠ¨æ€è°ƒæ•´
1. ä¿®æ”¹ç”µå‹é‡ç¨‹ä¸º 20Vï¼Œæ¸©åº¦é‡ç¨‹ä¸º 2000Â°C
2. ä¿å­˜é…ç½®
3. è§‚å¯ŸYè½´èŒƒå›´æ˜¯å¦å˜ä¸º 0-22V å’Œ 0-2200Â°C
4. è§‚å¯ŸYè½´æ ‡ç­¾æ˜¯å¦æ˜¾ç¤ºæ–°çš„é‡ç¨‹ä¿¡æ¯

### æµ‹è¯•4ï¼šæ•°æ®é”™ä¹±é—®é¢˜
1. è¿æ¥è®¾å¤‡
2. å¼€å§‹é‡‡é›†æ•°æ®
3. è§‚å¯Ÿæ•°æ®æ˜¯å¦æ­£ç¡®ï¼ˆCH2_1çš„æ•°æ®æ˜¾ç¤ºåœ¨CH2_1ï¼Œä¸ä¼šé”™ä½ï¼‰
4. ä¿®æ”¹é€šé“é…ç½®ï¼Œåº”ç”¨åˆ°è®¾å¤‡
5. å†æ¬¡é‡‡é›†æ•°æ®ï¼Œè§‚å¯Ÿæ•°æ®æ˜¯å¦ä»ç„¶æ­£ç¡®

---

## ğŸ‰ æ€»ç»“

**æ‰€æœ‰7ä¸ªä¼˜åŒ–å·²å…¨éƒ¨å®Œæˆï¼**

### âœ… åŸæœ‰4ä¸ªä¼˜åŒ–
1. **è¯¦ç»†å‚æ•°é…ç½®UI** - å®Œæ•´å®ç°
2. **é…ç½®è‡ªåŠ¨é‡æ–°è¿æ¥** - ç¡®ä¿é…ç½®æ­£ç¡®ç”Ÿæ•ˆï¼Œæ•°æ®ä¸é”™ä¹± âœ¨
3. **è¿æ¥åŠ è½½æç¤º** - ç•Œé¢æµç•…ï¼Œä½“éªŒå‹å¥½
4. **Yè½´åŠ¨æ€è°ƒæ•´** - æ ¹æ®é‡ç¨‹è‡ªåŠ¨è°ƒæ•´èŒƒå›´

### âœ¨ æ–°å¢3ä¸ªä¼˜åŒ–
5. **BURNOUTå¼‚å¸¸æ£€æµ‹** - è‡ªåŠ¨æ£€æµ‹ä¼ æ„Ÿå™¨å¼‚å¸¸ï¼Œé¿å…æ˜¾ç¤ºå¼‚å¸¸å¤§æ•°å€¼
6. **é…ç½®è‡ªåŠ¨ä¿å­˜** - æ¯æ¬¡ä¿å­˜é…ç½®æ—¶è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶
7. **é…ç½®è‡ªåŠ¨åŠ è½½** - å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½ä¸Šæ¬¡çš„é…ç½®ï¼Œæ— éœ€é‡æ–°é…ç½®

---

## ğŸ§ª æµ‹è¯•å»ºè®®

**ç¨‹åºå·²åœ¨åå°è¿è¡Œï¼ˆTerminal 5ï¼‰ï¼Œä½ å¯ä»¥ç«‹å³æµ‹è¯•ï¼š**

### æµ‹è¯•1ï¼šé…ç½®é‡æ–°è¿æ¥ï¼ˆæœ€é‡è¦ï¼‰
1. è¿æ¥è®¾å¤‡
2. ç‚¹å‡»"é€šé“é…ç½®"ï¼Œä¿®æ”¹é€šé“æˆ–é‡ç¨‹
3. ä¿å­˜é…ç½®
4. è§‚å¯Ÿæ˜¯å¦å¼¹å‡º"æ˜¯å¦é‡æ–°è¿æ¥è®¾å¤‡ä»¥åº”ç”¨æ–°é…ç½®ï¼Ÿ"
5. ç‚¹å‡»"æ˜¯"
6. è§‚å¯Ÿæ˜¯å¦æ˜¾ç¤ºåŠ è½½å¯¹è¯æ¡†
7. è§‚å¯Ÿæ˜¯å¦è‡ªåŠ¨é‡æ–°è¿æ¥æˆåŠŸ
8. å¼€å§‹é‡‡é›†æ•°æ®ï¼ŒéªŒè¯æ•°æ®æ˜¯å¦æ­£ç¡®ï¼ˆä¸ä¼šé”™ä¹±ï¼‰

### æµ‹è¯•2ï¼šBURNOUTå¼‚å¸¸æ£€æµ‹
1. è¿æ¥è®¾å¤‡ï¼Œä½†ä¸è¿æ¥æ¸©åº¦ä¼ æ„Ÿå™¨
2. å¼€å§‹é‡‡é›†æ•°æ®
3. è§‚å¯Ÿæ§åˆ¶å°æ˜¯å¦è¾“å‡ºè­¦å‘Šä¿¡æ¯
4. è§‚å¯Ÿæ³¢å½¢æ˜¯å¦æ˜¾ç¤ºä¸º0ï¼ˆè€Œä¸æ˜¯å¼‚å¸¸å¤§æ•°å€¼ï¼‰

### æµ‹è¯•3ï¼šé…ç½®æŒä¹…åŒ–
1. é…ç½®é€šé“ï¼ˆå¦‚ï¼šç”µå‹é‡ç¨‹æ”¹ä¸º20Vï¼‰
2. ä¿å­˜é…ç½®
3. å…³é—­è½¯ä»¶
4. é‡æ–°æ‰“å¼€è½¯ä»¶
5. è§‚å¯ŸçŠ¶æ€æ æ˜¯å¦æ˜¾ç¤º"âœ“ å·²åŠ è½½ä¸Šæ¬¡ä¿å­˜çš„é€šé“é…ç½®"
6. è§‚å¯ŸYè½´èŒƒå›´æ˜¯å¦ä¸ºä¸Šæ¬¡é…ç½®çš„å€¼ï¼ˆ0-22Vï¼‰
7. ç‚¹å‡»"é€šé“é…ç½®"ï¼ŒéªŒè¯é…ç½®æ˜¯å¦ä¸ºä¸Šæ¬¡ä¿å­˜çš„å€¼

### æµ‹è¯•4ï¼šYè½´åŠ¨æ€è°ƒæ•´
1. ä¿®æ”¹æ¸©åº¦é‡ç¨‹ä¸º 2000Â°C
2. ä¿å­˜é…ç½®
3. è§‚å¯ŸYè½´èŒƒå›´æ˜¯å¦å˜ä¸º 0-2200Â°C
4. è§‚å¯ŸYè½´æ ‡ç­¾æ˜¯å¦æ˜¾ç¤º"æ¸©åº¦ (Â°C, é‡ç¨‹: 2000Â°C)"

---

## ğŸ“ é…ç½®æ–‡ä»¶ä½ç½®

**é…ç½®æ–‡ä»¶ä¿å­˜åœ¨ï¼š** `C:\Users\27115\.battery_analyzer\channel_config.json`

ä½ å¯ä»¥æ‰‹åŠ¨æŸ¥çœ‹æˆ–ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ã€‚

---

## ğŸ”§ å…³é”®æŠ€æœ¯å®ç°

### 1. é‡æ–°è¿æ¥è®¾å¤‡ï¼ˆè§£å†³æ•°æ®é”™ä¹±ï¼‰
```python
def _reconnect_device_with_new_config(self) -> None:
    # 1. ä¿å­˜å½“å‰è¿æ¥å‚æ•°
    connection_type = self.device_client.connection_type
    ip_address = self.device_client.ip_address
    port = self.device_client.port
    com_port = self.device_client.com_port

    # 2. æ–­å¼€å½“å‰è¿æ¥
    self.device_client.disconnect()
    self.device_connected = False
    time.sleep(0.5)  # ç­‰å¾…è®¾å¤‡å®Œå…¨æ–­å¼€

    # 3. é‡æ–°è¿æ¥è®¾å¤‡
    self._connect_to_device(params)  # ä¼šè‡ªåŠ¨åº”ç”¨æ–°é…ç½®
```

### 2. BURNOUTå¼‚å¸¸æ£€æµ‹
```python
# æ£€æµ‹æ¸©åº¦å¼‚å¸¸ï¼ˆè¶…å‡ºé‡ç¨‹1.5å€ï¼‰
if abs(t_ternary) > ternary_temp_range * 1.5:
    print(f"âš ï¸ ä¸‰å…ƒç”µæ± æ¸©åº¦å¼‚å¸¸ (BURNOUT): {t_ternary:.2f}Â°C")
    t_ternary = 0.0
```

### 3. é…ç½®æŒä¹…åŒ–
```python
# ä¿å­˜é…ç½®
config_file = os.path.expanduser("~/.battery_analyzer/channel_config.json")
with open(config_file, 'w', encoding='utf-8') as f:
    json.dump(self.channel_config, f, indent=4, ensure_ascii=False)

# åŠ è½½é…ç½®
with open(config_file, 'r', encoding='utf-8') as f:
    self.channel_config = json.load(f)
```

---

## ğŸ¯ æœ€ç»ˆæ•ˆæœ

**ç°åœ¨ä½ å¯ä»¥ï¼š**
1. âœ… é…ç½®å®Œé€šé“åè‡ªåŠ¨é‡æ–°è¿æ¥è®¾å¤‡ï¼Œæ•°æ®ä¸ä¼šé”™ä¹±
2. âœ… æ¸©åº¦ä¼ æ„Ÿå™¨æœªè¿æ¥æ—¶ï¼Œè‡ªåŠ¨æ£€æµ‹BURNOUTå¼‚å¸¸
3. âœ… æ¯æ¬¡å¯åŠ¨è½¯ä»¶è‡ªåŠ¨åŠ è½½ä¸Šæ¬¡çš„é…ç½®ï¼Œæ— éœ€é‡æ–°é…ç½®
4. âœ… è¿æ¥è®¾å¤‡æ—¶æœ‰åŠ è½½æç¤ºï¼Œç•Œé¢ä¸å¡é¡¿
5. âœ… Yè½´èŒƒå›´æ ¹æ®é…ç½®çš„é‡ç¨‹è‡ªåŠ¨è°ƒæ•´
6. âœ… æ‰€æœ‰é…ç½®å‚æ•°ï¼ˆé‡ç¨‹ã€çƒ­ç”µå¶ç±»å‹ã€INT/EXTï¼‰éƒ½å¯ä»¥è®¾ç½®

**ç¨‹åºå·²åœ¨åå°è¿è¡Œï¼Œä½ å¯ä»¥ç«‹å³æµ‹è¯•ï¼** ğŸš€

